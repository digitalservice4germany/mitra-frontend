var A=Object.defineProperty;var F=(e,t,s)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var p=(e,t,s)=>(F(e,typeof t!="symbol"?t+"":t,s),s),E=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var m=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)};var w=(e,t,s)=>(E(e,t,"access private method"),s);import{a as C}from"./index.7fea007a.js";var d,T=new Uint8Array(16);function V(){if(!d&&(d=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(T)}var L=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function N(e){return typeof e=="string"&&L.test(e)}var n=[];for(var h=0;h<256;++h)n.push((h+256).toString(16).substr(1));function I(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase();if(!N(s))throw TypeError("Stringified UUID is invalid");return s}function M(e,t,s){e=e||{};var o=e.random||(e.rng||V)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){s=s||0;for(var a=0;a<16;++a)t[s+a]=o[a];return t}return I(o)}const O=e=>e instanceof u;class u{constructor(){p(this,"id");this.id=M()}equals(t){return t==null?!1:this===t?!0:O(t)?this.id===t.id:!1}}class j{}class q extends j{constructor(t=""){super();this.answer=t}getAnswer(){return this.answer}setAnswer(t){this.answer=t}toString(){return this.answer}}class B extends u{constructor(t,s){super();this.text=t,this.answer=s}getAnswer(){return this.answer}setAnswer(t){this.answer.setAnswer(t)}}const l=class extends B{constructor(t,s=new q){super(t,s)}getType(){return l.TYPE}clone(){return new l(this.text,this.answer)}};let r=l;p(r,"TYPE","TextAnswerStep");class i extends u{constructor(t,s=[]){super();this.text=t,this.steps=s}addSteps(...t){this.steps.push(...t)}clone(){return new i(this.text,this.steps.map(t=>t.clone()))}}class y extends u{constructor(t=[]){super();this.modules=t}addModules(...t){this.modules.push(...t)}}const G=new r("Schritt 1.1"),J=new r("Schritt 1.2"),U=new r("Schritt 1.3"),_=new r("Schritt 2.1"),$=new r("Schritt 2.2"),D=new r("Schritt 2.3"),H=new r("Schritt 3.1"),Y=new r("Schritt 3.2"),W=new r("Schritt 3.3"),X=new r("Schritt 3.4"),g=new i("Rubrum"),S=new i("Gegenstand und Bestandteile des Vertrags"),x=new i("Gegenstand der Leistungen");g.addSteps(G,J,U);S.addSteps(_,$,D);x.addSteps(H,Y,W,X);const v=new y;v.addModules(g,S,x);let b;const z={load(){return b||v},save(e){b=e}};var c,P;const f=class extends u{constructor(t,s){super();m(this,c);this.title=t,this.modules=s}static fromPlaybook(t){const s=t.modules.map(o=>o.clone());return new f("",s)}getSteps(){return this.modules.flatMap(t=>t.steps)}getNextStepFor(t){return this.getSteps()[w(this,c,P).call(this,t)+1]}getPreviousStepFor(t){return this.getSteps()[w(this,c,P).call(this,t)-1]}getModules(){return this.modules}getModuleFor(t){return this.modules.find(s=>s.steps.find(o=>o.equals(t)))}};let k=f;c=new WeakSet,P=function(t){return this.getSteps().findIndex(s=>s.equals(t))};function R(e){return e.title.toLowerCase().replace(/\s/g,"-")}async function K(e,t){const s=await e.createWritable();await s.write(t),await s.close()}const Q={load(){return new k("",[])},async save(e){if(window.showSaveFilePicker){const t=await window.showSaveFilePicker({suggestedName:R(e),startIn:"desktop",types:[{accept:{"application/json":[".json"]}}]});await K(t,JSON.stringify(e))}else await C(()=>import("./FileSaver.min.297e5979.js").then(function(t){return t.F}),[]).then(({default:t})=>{const s=new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"});t.saveAs(s,`${R(e)}.json`)})}},Z={load:async e=>{const t=new FileReader;t.readAsText(e);const s=await new Promise(a=>{t.onload=()=>{a(t.result)}}),o=JSON.parse(s).playbook;return tt(o)}};function tt(e){const t=e.modules.map(et);return new y(t)}function et(e){const t=e.steps.map(st);return new i(e.text,t)}function st(e){return new r(e.text)}const ot=()=>z,at=()=>Q,it=()=>Z;export{k as C,r as T,ot as a,at as b,v as c,it as m};
